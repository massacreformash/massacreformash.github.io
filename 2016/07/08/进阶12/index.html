<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>进阶第12天 | MFMAL&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="01-复习预习02-左侧点击两次的bug
步骤:
点击的时候记录左侧位置
滑动的时候也记录左侧的位置



03-控制器获取点击加号的事件
步骤:
在cell的xib中添加一个加号按钮,
监听加号按钮的点击事件.(这个事件在cell中)
希望动画是由控制器来做,所以,希望点击cell的时候通知到控制器.
这时,使用代理
代理写法:
在cell的.h中 写协议
在cell的.h中 写协议 的 代理方">
<meta property="og:type" content="article">
<meta property="og:title" content="进阶第12天">
<meta property="og:url" content="http://yoursite.com/2016/07/08/进阶12/index.html">
<meta property="og:site_name" content="MFMAL's Blog">
<meta property="og:description" content="01-复习预习02-左侧点击两次的bug
步骤:
点击的时候记录左侧位置
滑动的时候也记录左侧的位置



03-控制器获取点击加号的事件
步骤:
在cell的xib中添加一个加号按钮,
监听加号按钮的点击事件.(这个事件在cell中)
希望动画是由控制器来做,所以,希望点击cell的时候通知到控制器.
这时,使用代理
代理写法:
在cell的.h中 写协议
在cell的.h中 写协议 的 代理方">
<meta property="og:updated_time" content="2016-07-29T11:27:26.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="进阶第12天">
<meta name="twitter:description" content="01-复习预习02-左侧点击两次的bug
步骤:
点击的时候记录左侧位置
滑动的时候也记录左侧的位置



03-控制器获取点击加号的事件
步骤:
在cell的xib中添加一个加号按钮,
监听加号按钮的点击事件.(这个事件在cell中)
希望动画是由控制器来做,所以,希望点击cell的时候通知到控制器.
这时,使用代理
代理写法:
在cell的.h中 写协议
在cell的.h中 写协议 的 代理方">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/scrollUp/image.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <div class="logo">
        <img src="/logo.png" alt="Profile Picture">
      </div>
      <div id="title">MFMAL's Blog</div>
      
       <ul class="my-socials">
  
  <li>
  	<a href="https://github.com/henryhuang" class="github" target="_blank">
  		<i class="fa fa-github"></i>
  	</a>
  </li>
  
  <li>
  	<a href="http://weibo.com/626242034" class="weibo" target="_blank">
  		<i class="fa fa-weibo"></i>
  	</a>
  </li>
  
 
</ul>
    </div>
  </div>
  <div id="header-inner" class="">
    <nav id="main-nav">
      <a id="main-nav-toggle" class="nav-icon"></a>
      <!--
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
      -->
    </nav>
    <nav id="title-nav" style="display:none">
      <a href="/">MFMAL&#39;s Blog</a>
      <img src="/logo.png" alt="Profile Picture">
      <!--
      <span id="title-nav-socials">
        
          <a href="https://github.com/henryhuang" class="github" target="_blank">
            <i class="fa fa-github"></i>
          </a>
        
          <a href="http://weibo.com/626242034" class="weibo" target="_blank">
            <i class="fa fa-weibo"></i>
          </a>
        
       
     </span>
      -->
    </nav>
    <nav id="sub-nav">
      
      <a id="nav-search-btn" class="nav-icon" title="Search"></a>
    </nav>
    <div id="search-form-wrap">
      <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
        <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="搜索">
        <input type="submit" value="" class="search-form-submit">
        <input name=tn type=hidden value="bds">
        <input name=cl type=hidden value="3">
        <input name=ct type=hidden value="2097152">
        <input type="hidden" name="si" value="yoursite.com">
      </form>
    </div>
  </div>
  <div class="site-nav" style="display: none;">
    <ul>
    
        <li><a href="/">首页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
    </ul>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-进阶12" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/07/08/进阶12/" class="article-date">
  <time datetime="2016-07-07T23:53:00.000Z" itemprop="datePublished">2016-07-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      进阶第12天
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="01-复习预习"><a href="#01-复习预习" class="headerlink" title="01-复习预习"></a>01-复习预习</h3><h3 id="02-左侧点击两次的bug"><a href="#02-左侧点击两次的bug" class="headerlink" title="02-左侧点击两次的bug"></a>02-左侧点击两次的bug</h3><ul>
<li>步骤:<ul>
<li>点击的时候记录左侧位置</li>
<li>滑动的时候也记录左侧的位置</li>
</ul>
</li>
</ul>
<h3 id="03-控制器获取点击加号的事件"><a href="#03-控制器获取点击加号的事件" class="headerlink" title="03-控制器获取点击加号的事件"></a>03-控制器获取点击加号的事件</h3><ul>
<li>步骤:<ul>
<li>在cell的xib中添加一个加号按钮,</li>
<li>监听加号按钮的点击事件.(这个事件在cell中)</li>
<li>希望动画是由控制器来做,所以,希望点击cell的时候通知到控制器.</li>
<li>这时,使用代理</li>
<li>代理写法:<ul>
<li>在cell的.h中 写协议</li>
<li>在cell的.h中 写协议 的 代理方法</li>
<li>在cell的.h中 写代理属性</li>
<li>在cell的.m中 判断代理方式是否响应,如果响应,执行.</li>
<li>在控制器的.m中 使用这个代理方法(1.遵守协议,2.找到cell,cell.delegate = self,3.实现代理方法)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="04-坐标系转换"><a href="#04-坐标系转换" class="headerlink" title="04-坐标系转换"></a>04-坐标系转换</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[shopDetailOrderFoodCell convertPoint:addButton.center toView:self.view];</div></pre></td></tr></table></figure>
<ul>
<li>相对于self.view的位置 = cell的addButton.center的位置 转化到 self.view的坐标系</li>
</ul>
<h3 id="05-简单实现直线动画效果"><a href="#05-简单实现直线动画效果" class="headerlink" title="05-简单实现直线动画效果"></a>05-简单实现直线动画效果</h3><ul>
<li>步骤:<ul>
<li>在代理方法中,创建了一个关键帧动画.</li>
<li>修改红点儿的’position’ </li>
<li>创建imageView,设置红点图片和center为start</li>
<li>把动画添加到红点儿的imageView的layer上</li>
</ul>
</li>
</ul>
<h3 id="06-移除红点儿的imageView"><a href="#06-移除红点儿的imageView" class="headerlink" title="06-移除红点儿的imageView"></a>06-移除红点儿的imageView</h3><ul>
<li>方法1:<ul>
<li>延时(动画的时间)直接remove即可</li>
</ul>
</li>
<li>方法2:<ul>
<li>利用KVC</li>
<li>因为,动画结束的时候,可以获取到不同的动画,</li>
<li>在添加动画之前,相当于多给anim设置一个键值对</li>
<li>key随便写 value就是这个红色的iamgeView</li>
<li>在动画结束的时候,通过不同的anim对象,取同样的key.就可以获取到每次做动画的iamgeView</li>
<li>移除</li>
</ul>
</li>
</ul>
<h3 id="07-曲线动画"><a href="#07-曲线动画" class="headerlink" title="07-曲线动画"></a>07-曲线动画</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[path moveToPoint:start];</div><div class="line">[path addQuadCurveToPoint:CGPointMake(50, self.view.bounds.size.height - 50) controlPoint:CGPointMake(start.x - 150, start.y - 150)];</div></pre></td></tr></table></figure>
<ul>
<li>控制点的含义 请参考素材中的图</li>
</ul>
<h3 id="08-购物车界面"><a href="#08-购物车界面" class="headerlink" title="08-购物车界面"></a>08-购物车界面</h3><ul>
<li>步骤:<ul>
<li>创建xib视图.</li>
<li>托控件(注意;背景是透明的,再拖一个黄色view) </li>
<li>在代码中写一个快速获取视图的方法,</li>
<li>在控制器的view添加购物的view,同时设置自动布局<ul>
<li>下左右 0  宽60</li>
</ul>
</li>
<li>修改tableView布局(不让购物车遮挡tableView)    </li>
<li>修改两个tableView的bottom为购物车的top</li>
<li>记得设置offset为正数(10)    </li>
</ul>
</li>
</ul>
<h3 id="09-曲线动画停到购物车图标的中心点"><a href="#09-曲线动画停到购物车图标的中心点" class="headerlink" title="09-曲线动画停到购物车图标的中心点"></a>09-曲线动画停到购物车图标的中心点</h3><ul>
<li>想在控制器中获取’购物车视图’中的’购物车图标’的’中心’</li>
<li>控制器里面创建了购物车视图,获取视图,理论上就可以获取到里面的所有内容.</li>
<li>把’购物的图标’写到.m中,.h提供一个获取这个’购物车图标’的’中心’的方法.</li>
<li>在控制器中直接调用即可(在写核心动画的代码的方法中,直接获取不到购物车视图,需要全局属性)</li>
</ul>
<h3 id="10-右侧cell跳转到详情页面"><a href="#10-右侧cell跳转到详情页面" class="headerlink" title="10-右侧cell跳转到详情页面"></a>10-右侧cell跳转到详情页面</h3><ul>
<li>找到右边的点击事件</li>
<li>创建详情控制器</li>
<li>push</li>
</ul>
<h3 id="11-移动控制器view动画有问题的解决办法"><a href="#11-移动控制器view动画有问题的解决办法" class="headerlink" title="11-移动控制器view动画有问题的解决办法"></a>11-移动控制器view动画有问题的解决办法</h3><ul>
<li>原因:<ul>
<li>因为计算的点都是根据控制器的view计算的.</li>
<li>在动控制器的view的时候,就会出现问题</li>
<li>解决的思路,就是找一个不动的坐标系进行计算</li>
<li>把开始和结束的点,都转化成window</li>
<li>同时记得把添加红色imageView的那句话,同时改成添加到window就解决了.</li>
</ul>
</li>
</ul>
<h3 id="12-添加详情页面的collectionView"><a href="#12-添加详情页面的collectionView" class="headerlink" title="12-添加详情页面的collectionView"></a>12-添加详情页面的collectionView</h3><ul>
<li>创建collectionView</li>
<li>添加到控制器的视图</li>
<li>使用自动布局</li>
<li>创建自定义layout</li>
<li>layout中设置,item大小/最小行间距/最小cell间距/滚动方向</li>
<li>设置collectionView的分页</li>
<li>数据源和代理</li>
<li>注册单元格    </li>
</ul>
<h3 id="13-分析数据源的写法"><a href="#13-分析数据源的写法" class="headerlink" title="13-分析数据源的写法"></a>13-分析数据源的写法</h3><ul>
<li>实际上,这个页面并不是只有一组,和之前的tableView一样,只不过是让组之间的间距都为0</li>
<li>所以,我们的两个数据源方法(有多少组,有多少行),和之前tableView一样</li>
</ul>
<h3 id="14-自定义cell显示数据"><a href="#14-自定义cell显示数据" class="headerlink" title="14-自定义cell显示数据"></a>14-自定义cell显示数据</h3><ul>
<li>步骤<ul>
<li>自己创建一个cell</li>
<li>重新cell的initWithFrame方法</li>
<li>在里面创建子控件,并使用自动布局</li>
<li>在.h中声明一个 ‘food’ 的模型</li>
<li>在vc中(cellForItem)中,传入数据(数据和前一个tableView一样)</li>
<li>在.m中,set数据的方法,把数据放在控件上</li>
</ul>
</li>
</ul>
<h3 id="15-进入页面的偏移量"><a href="#15-进入页面的偏移量" class="headerlink" title="15-进入页面的偏移量"></a>15-进入页面的偏移量</h3><ul>
<li>步骤:<ul>
<li>传入点的位置,因为之前的设计,就是让collectionView和tableView的组和cell的个数都一样,所以,直接传入点击的tableView的索引.</li>
<li>在viewDidLoad(setupUI)中,使用scrollTo的方法,进行滑动.动画为no</li>
<li>此时,collectionView如果使用自动布局,collectionView并没有大小,需要告诉系统,赶快计算一下.</li>
<li>layoutIfNeeded.</li>
</ul>
</li>
</ul>
<h3 id="16-提示框"><a href="#16-提示框" class="headerlink" title="16-提示框"></a>16-提示框</h3><ul>
<li>使用svprogressHUD</li>
<li>show status 显示文字</li>
<li>setMinimumDismissTimeInterval 时间</li>
<li>setDefaultMaskType 遮罩层</li>
</ul>
<h3 id="17-自定义控件-集成UIControl"><a href="#17-自定义控件-集成UIControl" class="headerlink" title="17-自定义控件(集成UIControl)"></a>17-自定义控件(集成UIControl)</h3><ul>
<li>如果之前是某一个继承view的视图,如果想要监听,可以直接把这个view改成Control</li>
<li>通过addtarget的方法 进行监听.</li>
<li>在需要使用的时候,发送一个事件(sendActionsForControlEvents)</li>
</ul>
<h3 id="18-美团往右再往上的bug"><a href="#18-美团往右再往上的bug" class="headerlink" title="18-美团往右再往上的bug"></a>18-美团往右再往上的bug</h3><ul>
<li>在手势的松手/失败/取消的时候直接return</li>
</ul>
<h3 id="xx-完善"><a href="#xx-完善" class="headerlink" title="xx-完善"></a>xx-完善</h3><ul>
<li><a href="https://www.cocoacontrols.com/" target="_blank" rel="external">https://www.cocoacontrols.com/</a></li>
<li><a href="http://code4app.com/" target="_blank" rel="external">http://code4app.com/</a></li>
<li>动画框架 pop</li>
<li>pop 案例 popping</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2016/07/08/进阶12/" data-id="cir7oll720001vns6dpn53szt" class="article-share-link">分享到</a>
      

      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/07/29/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hello World
        
      </div>
    </a>
  
  
</nav>

  
</article>

</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 massacreformash<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <!--
      <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
</nav>
    -->
    

<!-- 百度分享 start -->

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>



<script src="/js/jquery.scrollUp.min.js"></script>
<script src="/js/jquery.transform.js"></script>
<script src="/js/menu.js"></script>

<script src="/js/script.js"></script>
<script src="/js/scrollUp.js"></script>

  </div>
</body>
</html>